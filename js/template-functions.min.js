$(document).ready(function(){"use strict";var g=".header",m=".header-animated",v=".header-sticky",w=".header-background",y=".header-compact",C=".header-in",x=".header-out",b=".header-positioned",a=".equalize",c=".fullscreen-sections-wrapper",r=".fullscreen-section",s=".scroll-link",t=".grid-container",l=".grid-item, .masonry-stamp",o=".grid-filter-menu, .grid-filter-dropdown",d="700ms",h="700ms",u=!1,e=[".video-container iframe",".video-container object"],i=["www.youtube.com","player.vimeo.com","http://www.dailymotion.com"],n=".lightbox-link",S=".form-element",z=".form-response",k=".form-honeypot",T=".form-submit",p=".required-field",P="Please fill out required fields.",H="Please enter a valid email address.",O=".required-field",A="Oh boy an error occurred, please try again.",I="Please fill out required fields.",M="Please enter a valid email address.",f=".map-pan-link-container",L=["images/assets/map-marker.png","images/assets/map-marker-2.png"],F=[[40.723301,-74.002988]],E=["Downtown New York Office<br>44 St. West 32"],j=12,W=".content",q=".footer-fixed",D=".footer",V="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",R={init:function(){$("body").removeClass("no-js"),R.siteHeader(),R.retinize(),R.equalize(768),R.parallax(".parallax",!0,!1,!0),R.fullScreenSection(),R.masonry(),R.logoSlider(),R.heroSlider(),R.testimonialSlider(),R.teamSlider(),R.recentSlider(),R.carouselSlider(),R.contentSlider(),R.fullScreenSlider(),R.fullWidthSlider(),R.sliderAuxNav(),R.lightbox(),R.counter(".stat",".stat-counter",!1),R.horizon(".horizon",".parallax .horizon","easeInOutQuint",!1,1),R.freeze(".freeze"),R.videos(),R.mediaElement(),R.signupForm(),R.contactForm(),R.enablePlaceHolder();try{document.getElementsByClassName("map-canvas")&&google.maps.event.addDomListener(window,"load",R.googleMap)}catch(e){}R.fixedFooter(),R.pageFade(),R.scrollToSection(),$("body").hasClass("preload-page")&&R.preloadPage()},retinize:function(){$("#bkg-retina-img, #retina-img, [data-2x]").retinizeImages()},equalize:function(e){imagesLoaded($(a),function(){$(a).equalizeHeights({clearUnder:e})})},parallax:function(e,a,i,t){$(e).snowBridge({scaleContainer:a,scaleUnder:960,scaleMinHeight:400,fullscreen:i,fadeInOut:t,fadeThreshold:.5,retinaSupport:!1,parallaxFactor:.6,onLoaded:function(){R.horizon(".horizon","","easeInOutQuint",!1,1)}})},horizon:function(e,a,i,t,o){if($("body").hasClass("preload-page"))return!1;$(e).not(a).horizon({easing:i,recurring:t,threshold:o})},freeze:function(e){$(window).one("load",function(){$(e).freeze({breakpoint:960})})},counter:function(e,a,i){$(a).counter({autoStart:!1}),$(e).each(function(){var e=$(this);e.horizon({recurring:i,inView:function(){if(e.find(a).data("counting"))return!1;e.find(a).each(function(){e.find(a).data("counting",!0),$(this).data("counter").startCounter()})},outOfView:function(){if(!i||!e.find(a).data("counting"))return!1;e.find(a).each(function(){e.find(a).data("counting",!1),$(this).data("counter").clearCounter()})}})})},carouselSlider:function(){$(".carousel-slider").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:700,autoAdvance:!1,forceFit:!1,scaleMinHeight:"auto",carousel:!0,carouselVisible:3,lazyLoad:!1,navArrows:!0,navPagination:!0,navShowOnHover:!0,retinaSupport:!1})},contentSlider:function(){$(".content-slider").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:700,autoAdvance:!1,forceFit:!1,scaleMinHeight:"auto",lazyLoad:!0,navArrows:!0,navPagination:!0,navShowOnHover:!0,retinaSupport:!1})},fullScreenSlider:function(){$(".tm-slider-container.fullscreen").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:700,autoAdvance:!1,fullscreen:!0,captionScaling:!1,lazyLoad:!0,navArrows:!0,navPagination:!0,navShowOnHover:!0,respectRatio:!1,retinaSupport:!1})},fullWidthSlider:function(){$(".full-width-slider").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:700,autoAdvance:!1,forceFit:!1,fullwidth:!0,scaleUnder:960,scaleMinHeight:400,captionScaling:!0,lazyLoad:!0,navArrows:!0,navPagination:!0,navShowOnHover:!0,respectRatio:!1,retinaSupport:!1})},logoSlider:function(){$(".logo-slider").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:700,autoAdvance:!0,carousel:!0,carouselVisible:5,adaptiveHeight:!0,lazyLoad:!1,navArrows:!0,navPagination:!0,showProgressBar:!1,navShowOnHover:!0,retinaSupport:!1})},heroSlider:function(){$(".hero-slider").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:900,autoAdvance:!1,scaleMinHeight:"auto",carousel:!1,carouselVisible:1,adaptiveHeight:!0,lazyLoad:!1,navArrows:!0,navPagination:!0,navShowOnHover:!1,retinaSupport:!1})},testimonialSlider:function(){$(".testimonial-slider").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:900,autoAdvance:!1,scaleMinHeight:"auto",carousel:!0,carouselVisible:1,adaptiveHeight:!0,lazyLoad:!1,navArrows:!1,navPagination:!0,navShowOnHover:!1,retinaSupport:!1})},teamSlider:function(){$(".team-slider").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:900,autoAdvance:!1,carousel:!0,carouselVisible:3,adaptiveHeight:!0,lazyLoad:!1,navArrows:!1,navPagination:!0,navShowOnHover:!1,retinaSupport:!1})},recentSlider:function(){$(".recent-slider").avalancheSlider({animation:"slide",easing:"easeInOutQuart",speed:900,autoAdvance:!1,carousel:!0,carouselVisible:3,adaptiveHeight:!0,lazyLoad:!0,navArrows:!0,navPagination:!0,navShowOnHover:!0,retinaSupport:!1})},sliderAuxNav:function(){$(".slider-aux-nav").each(function(){var e="#"+$(this).data("target-slider"),a=$(e).data("avalancheSlider");$(this).is(".slider-aux-prev")?$(this).on("click",function(e){e.preventDefault(),a.prevSlide()}):$(this).is(".slider-aux-next")&&$(this).on("click",function(e){e.preventDefault(),a.nextSlide()})}),$(".slider-aux-bullet").each(function(){var e="#"+$(this).data("target-slider"),i=$(e).data("avalancheSlider");$(this).on("click",function(e){e.preventDefault();var a=$(this).data("slide");i.slideTo(a),$(this).siblings().removeClass("active"),$(this).addClass("active")})})},lightbox:function(){$(n).summitLightbox({lightboxAnimation:"slideInTop",contentAnimation:"slide",slideAmount:100,easing:"swing",speed:350,onLoaded:function(){var a,i=$(n).data("summitLightbox"),e=$("#tm-lightbox").find(".tml-aux-exit");0!==e.length&&e.on("click",function(e){e.preventDefault(),$(this).css({transition:"none"}),i.destroyLightbox()}),$(".tm-lightbox").find(".wpcf7").length&&(a=null,$(".wpcf7 > form").each(function(){var e=$(this);wpcf7.initForm(e),wpcf7.cached&&wpcf7.refill(e)}),$(".tm-lightbox").hasClass("destroy-on-success")&&document.addEventListener("wpcf7mailsent",function(e){clearTimeout(a),a=setTimeout(function(){i.destroyLightbox()},1e3)},!1))}})},videos:function(){fluidvids.init({selector:e,players:i})},mediaElement:function(){$(".mejs-container audio, .mejs-container video").each(function(){var e=!1;$(this).is("audio")&&(e=!0),$(this).mediaelementplayer({features:e?["playpause","progress","volume","fullscreen"]:["playpause","progress","current","duration","tracks","volume","fullscreen"],videoWidth:"100%",videoHeight:"100%",audioWidth:"100%",videoVolume:"vertical",audioVolume:"horizontal"})})},siteHeader:function(){var e,a,i,t,o,n,s,r,l,d=0,c=960,h=$(g),u=!!h.is("[data-sticky-threshold]");function f(){e=$(window).width(),a=$(window).height(),i=Math.ceil(h.outerHeight()),t="window-height"===h.data("bkg-threshold")?a-i:h.data("bkg-threshold"),o="window-height"===h.data("compact-threshold")?a-i:h.data("compact-threshold"),n="window-height"===h.data("sticky-threshold")?a-i:h.data("sticky-threshold"),s=h.data("helper-in-threshold"),r=h.data("helper-out-threshold")}m=m.split(".").join(""),v=v.split(".").join(""),w=w.split(".").join(""),y=y.split(".").join(""),C=C.split(".").join(""),x=x.split(".").join(""),b=b.split(".").join("");function p(a){$("body").hasClass("mobile")||e<c||(n&&$(a).scrollTop()>=n||0===n?($(g).addClass(v),s&&r&&$(g).addClass(b)):($(g).removeClass(v),s&&r&&$(g).removeClass(b)),t&&$(a).scrollTop()>=t?$(g).addClass(w):$(g).removeClass(w),o&&$(a).scrollTop()>=o?$(g).addClass(y):$(g).removeClass(y),l=$(a).scrollTop(),d<l?(s&&$(a).scrollTop()>=s&&$(g).addClass(C),$(g).removeClass(x)):l<d&&(s&&$(a).scrollTop()<=s&&($(g).removeClass(C),$(g).removeClass(x)),s&&$(a).scrollTop()>=s&&$(a).scrollTop()<=r&&($(g).addClass(x),$(x).on(V,function(e){return e.stopPropagation(),e.target===$(a)[0]&&void $(g).removeClass(x)}))),d=l)}$(window).on("scroll",function(){p($(this))}),$(window).on("resize",function(){!function(){if(f(),$("body").hasClass("mobile"))return;c<e&&u&&h.css({height:h.outerHeight()+"px"}),c<e&&$(window).scrollTop()>=n?($(g).addClass(v),s&&r&&$(g).addClass(b)):($(g).removeClass(v),s&&r&&$(g).removeClass(b)),c<e&&$(window).scrollTop()<t?$(g).removeClass(w):c<e&&$(window).scrollTop()>t&&$(g).addClass(w),c<e&&$(window).scrollTop()<o?$(g).removeClass(y):c<e&&$(window).scrollTop()>o&&$(g).addClass(y),e<c&&$(g).removeClass(y)}()}),$("body").hasClass("mobile")||$(window).one("load",function(){f(),p($(this)),c<e&&u&&h.css({height:i+"px"}),$(g).addClass(m)})},fullScreenSection:function(){var l=$(window).width(),d=$(window).height();$(window).on("resize",function(){l=$(window).width(),d=$(this).height(),$(r).each(function(){var e,a,i,t,o,n,s=$(this),r=s.find(".background-image, .background-slider-wrapper");$(this).is("[data-width],[data-height]")?$("body").hasClass("mobile")||l<=768?(s.addClass("fs-image-scale content-below-on-mobile"),e=s.data("width"),a=s.data("height"),i=s.data("min-height"),t=s.width(),o=a<=e?e/a:a/e,n=a<=e?t/o:t*o,n=i&&n<=i?i:n,s.css({height:"auto"}),r.css({height:n+"px",minHeight:n+"px"})):(s.removeClass("fs-image-scale"),s.css({height:""}),r.css({height:"",minHeight:""})):$("body").hasClass("mobile")||l<=768?r.css({height:d+"px"}):(s.removeClass("fs-image-scale"),s.css({height:""}),r.css({height:"",minHeight:""}))})}).resize(),function(){var a;if(1<$(c).find(r).length){if($("body").hasClass("mobile"))return;var i,t=!$(c).hasClass("no-navigation");if(t){i=$("<div>").addClass("fs-pagination").appendTo($(c));for(var e=1;e<$(c).children().length;e++)a=$(c).children().eq(e-1).attr("id"),$(c).find("#"+a).data("index",e),$(c).find(i).append('<a href="#'+a+'" id="fs-pagination-'+e+'" data-index="'+e+'" class="fs-bullet-nav" />');$(window).on("resize",function(){o()});var o=function(){$(i).css({marginTop:-$(i).outerHeight()/2+"px",opacity:1})};o(),$(c).find(".fs-bullet-nav").each(function(){$(this).on("click",function(e){if(e.preventDefault(),$(this).hasClass("active"))return!1;parseFloat($(this).data("index"));a=$(this).attr("href"),R.scrollPage(a,0)})})}$(window).on("scroll",function(){$(c).find(r).each(function(){n($(this))})});var n=function(e){e.data("fs-scrolling")||(window.requestAnimationFrame(function(){s(e)}),e.data("fs-scrolling",!0))},s=function(e){var a;R.isElementVisible(e,.6)&&t&&($(i).css({opacity:1}),a=$(c).find(e).data("index"),i.find(".active").removeClass("active"),i.find("#fs-pagination-"+a).addClass("active"),e.hasClass("nav-dark")?i.addClass("nav-dark"):i.removeClass("nav-dark")),t&&R.isElementVisible($(c),.6)?$(i).css({opacity:1,visibility:"visible"}):$(i).css({opacity:0,visibility:"hidden"}),e.data("fs-scrolling",!1)};$(c).find(r).each(function(){n($(this))})}}()},scrollToSection:function(){var t,a=[],o=$(g);$(s).each(function(){var e;a.push($(this).attr("href")),o.data("compact-threshold")?((e=o.clone().addClass("header-compact").css({display:"none"})).appendTo("body"),t=$(e).outerHeight(),e.remove()):t=o.outerHeight(),$(this).on("click",function(e){e.preventDefault();var a=$(this).attr("href"),i=$(this).data("offset")?$(this).data("offset"):$(window).width()<960?-o.outerHeight():-t;R.scrollPage(a,i)})}),$(window).one("load",function(){$.each(a,function(e,a){i($(a))})}),$(window).on("scroll",function(){$.each(a,function(e,a){i($(a))})});var i=function(e){e.data("section-scrolling")||(window.requestAnimationFrame(function(){n(e)}),e.data("section-scrolling",!0))},n=function(e){var a,i="header, .header-sub, .side-navigation-wrapper, .overlay-navigation-wrapper";R.isElementVisible(e,.6)?(a=e.attr("id"),$('a[href="#'+a+'"]').closest(i)&&($(i).find(s).parent().removeClass("current"),$(i).find('a[href="#'+a+'"]').parent().addClass("current"))):0===$(".in-view").length&&$(i).find(s).parent().removeClass("current"),e.data("section-scrolling",!1)}},isElementVisible:function(e,a){if(a=e.is("[data-visible-threshold]")?e.data("visible-threshold"):.6,void 0===e.offset())return console.log("template-functions.js@isElementVisible: "+e.selector+" cannot be found in your html page."),!1;var i=$(window).height(),t=$(window).scrollTop(),o=t+$(window).height(),n=e.offset().top,s=(e.height(),n+e.outerHeight()-i*a),r=n+i*a;return e.is($(c))||(r<=o&&t<=s?e.addClass("in-view"):e.removeClass("in-view")),r<=o&&t<=s},scrollPage:function(e,a){$("html, body").animate({scrollTop:$(e).offset().top+a},1e3,"easeInOutQuart")},masonry:function(){$(t).each(function(){var e,a,i,t,n=$(this),s=$(this).find(".grid"),r=$(n).data("default-filter")?$(n).data("default-filter"):"*";n.hasClass("fade-in-progressively")&&s.children().addClass("no-transition"),"*"!==r&&($(o).find(".active").removeClass("active"),$(o).find('[data-filter="'+r+'"]').addClass("active")),n.data("layout-mode")?(e=n.data("layout-mode")?n.data("layout-mode"):"masonry",n.is("[data-layout-mode]")&&n.addClass("masonry"),n.is("[data-set-dimensions]")&&n.addClass("masonry-set-dimensions"),u=!!n.is("[data-animate-resize]"),h=n.is("[data-animate-resize-duration]")?n.data("animate-resize-duration")+"ms":h,n.is(".masonry-set-dimensions, .masonry-set-dimensions-2")?(n.is(".full-width.no-margins")&&R.masonryWrapperWidth(n,s),a=R.masonryColWidth(n,s),R.masonryThumbSizes(n,s,R.masonryColWidth(n,s))):a=".grid-sizer",i=parseFloat(n.css("padding-top")),(t=$('<div class="tm-loader" style="margin-top: 0; top:'+i+'px"><svg id="circle" viewBox="25 25 50 50"><circle class="stroke" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></svg></div>')).appendTo(n),imagesLoaded(s,function(){s.isotope({filter:r,itemSelector:".grid-item",isResizeBound:!!u,transitionDuration:d,layoutMode:e,stamp:".masonry-stamp",masonry:{columnWidth:a}}),n.find(t).remove(),s.css({visibility:"visible",minHeight:"initial"}),$("body").hasClass("transition-support")&&s.children().removeClass("no-transition");var o=s.children().length-1;s.children().each(function(e){var a,i,t;n.is("[data-as-bkg-image]")&&n.is("[data-set-dimensions]")&&!$(this).find(".background-image").length&&(a=$(this).find("img"),i=$(this).find("img").attr("style"),t=a.attr("srcset")&&!$("body").hasClass("ie-browser")?a.prop("currentSrc"):a.attr("src"),$('<span class="background-image background-cover" style="'+i+'" />').css({"background-image":"url("+t+")"}).insertAfter(a),a.remove()),$(this).find("img").length||$(this).find(".background-image").length||$(this).addClass("no-image"),$("body").hasClass("transition-support")?$(this).delay(100*e).queue(function(){$(this).addClass("animate-in"),$(this).dequeue()}):$(this).delay(100*e).animate({opacity:1},500,"easeInOutQuart",function(){e===o&&n.removeClass("fade-in-progressively")})}),$(window).on("resize",function(){n.removeClass("fade-in-progressively"),n.is(".full-width.no-margins")&&R.masonryWrapperWidth(n,s),R.masonryThumbSizes(n,s,R.masonryColWidth(n,s)),u?s.isotope({transitionDuration:h,masonry:{columnWidth:".grid-sizer"!==a?R.masonryColWidth(n,s):".grid-sizer"}}):(s.removeClass("filtering"),s.isotope({transitionDuration:0,masonry:{columnWidth:".grid-sizer"!==a?R.masonryColWidth(n,s):".grid-sizer"}}).isotope("layout").isotope({transitionDuration:h}))})})):s.css({visibility:"visible"})}),$(o).each(function(){var a,i;$(this).find("ul a").on("click",function(e){e.preventDefault(),$(this).closest(o).find(".active").removeClass("active"),$(this).addClass("active"),a=$(this).closest(o).data("target-grid")?$(this).closest(o).data("target-grid"):t,$(a).removeClass("fade-in-progressively"),d=$(a).is("[data-animate-filter-duration]")?$(a).data("animate-filter-duration")+"ms":d,(a=$(a).find(".grid")).isotope({transitionDuration:d}),i=$(this).attr("data-filter"),$(a).addClass("filtering").isotope({filter:i})}),$(this).find("a").each(function(){var e;a=$(this).closest(o).data("target-grid")?$(this).closest(o).data("target-grid"):t,i="*"!=$(this).data("filter")?$(this).data("filter"):".grid-item",0<$(this).find(".project-count").length&&(e=$(a).find(i).length,$(this).find(".project-count").html(e))})})},masonryWrapperWidth:function(e,a){var i=Math.ceil(1.001*e.width());a.css({maxWidth:i+"px",width:i+"px"})},masonryColWidth:function(e,a){var i,t=$(window).width(),o=Math.ceil(e.width()),n=e.is(".full-width.no-margins")?Math.ceil(1.001*o):a.width();return e.is(".full-width.small-margins, .full-width.no-margins")?(a.hasClass("content-grid-2")&&(i=480<=t?n/2:+n),a.hasClass("content-grid-3")&&(i=768<t?n/3:t<=768&&480<t?n/2:+n),a.hasClass("content-grid-4")&&(i=1140<t?n/4:t<=1140&&768<t?n/3:t<=768&&480<t?n/2:+n),a.hasClass("content-grid-5")&&(i=1300<t?n/5:t<=1300&&1140<t?n/4:t<=1140&&768<=t?n/3:t<=768&&480<t?n/2:+n),a.hasClass("content-grid-6")&&(i=1300<t?n/6:t<=1300&&1140<t?n/4:t<=1140&&768<=t?n/3:t<=768&&480<t?n/2:+n)):(a.hasClass("content-grid-2")&&(i=600<=t?n/2:+n),a.hasClass("content-grid-3")&&(i=960<t?n/3:t<=960&&600<t?n/2:+n),a.hasClass("content-grid-4")&&(i=1140<t?n/4:t<=1140&&960<t?n/3:t<=960&&600<t?n/2:+n),a.hasClass("content-grid-5")&&(i=1300<t?n/5:t<=1300&&1140<t?n/4:t<=1140&&960<t?n/3:t<=960&&600<t?n/2:+n),a.hasClass("content-grid-6")&&(i=1300<t?n/6:t<=1300&&1140<t?n/4:t<=1140&&960<t?n/3:t<=960&&600<t?n/2:+n)),i=Math.floor(i)},masonryThumbSizes:function(e,a,i){var t,o=$(window).width(),n=$(".masonry-set-dimensions").hasClass("no-margins")?0:parseFloat(a.find(".grid-item").css("padding-left")),s=e.is(".masonry-set-dimensions")?e.is("[data-grid-ratio]")?parseFloat(e.data("grid-ratio")):1.5:1,r=Math.floor((i-n)/s+n);e.is(".masonry-set-dimensions")&&(t=e.is(".full-width.small-margins, .full-width.no-margins")?480:600,a.find(l).each(function(){$(this).is(".large, .masonry-stamp.large")?$(this).is(".portrait, .masonry-stamp.portrait")?$(this).css({width:t<o?Math.floor(2*i)+"px":i+"px",height:t<o?Math.floor(4*r)+"px":2*r+"px"}):$(this).css({width:t<o?Math.floor(2*i)+"px":i+"px",height:t<o?Math.floor(2*r)+"px":r+"px"}):$(this).is(".wide, .masonry-stamp.wide")?$(this).css({width:t<o?Math.floor(2*i)+"px":i+"px",height:t<o?r+"px":r/2+"px"}):$(this).is(".portrait, .masonry-stamp.portrait")?$(this).css({width:i+"px",height:Math.floor(2*r)+"px"}):$(this).css({width:i+"px",height:r+"px"})})),e.is(".masonry-set-dimensions-2")&&(600<o?a.find(l).each(function(){$(this).hasClass("horizontal")?$(this).hasClass("two-third")?$(this).children(".item-description").length?$(this).css({width:Math.floor(3*i)+"px",height:Math.floor(r)+"px"}):$(this).addClass("no-description").css({width:Math.floor(2*i)+"px",height:Math.floor(r)+"px"}):$(this).css({width:Math.floor(2*i)+"px",height:Math.floor(r)+"px"}):$(this).hasClass("vertical")?$(this).hasClass("two-third")&&$(this).children(".item-description").length?$(this).css({width:i+"px",height:Math.floor(3*i)+"px"}):$(this).css({width:i+"px",height:Math.floor(2*r)+"px"}):$(this).css({width:i+"px",height:Math.floor(r)+"px"})}):a.find(l).each(function(){$(this).find("iframe, video, .tm-slider-container").length?$(this).css({width:i+"px",height:r+"px"}):$(this).css({width:"",height:""})}))},signupForm:function(){$(".signup-form").submit(function(e){e.preventDefault();var a,i=$(this),t=i.parent().find(z),o=i.find(S),n=i.find('input[type="email"]'),s=i.find(k),r=i.find(T),l=i.attr("action"),d=i.attr("method"),c=i.serialize(),h=!1,u=!1,f=!1;if(p=p.split(".").join(""),o.removeClass(p),o.each(function(){$(this).attr("required")&&($(this).val()||(h=!0,$(this).addClass(p),t.hide().text(P).fadeIn(200)))}),h||(u=!0),n.val()&&!R.isValidEmail(n.val())?(t.hide().text(H).fadeIn(200),n.addClass(p)):f=!0,""!==s.val())return!1;h&&n.val()&&!R.isValidEmail(n.val())&&t.hide().text(P+" "+H).fadeIn(200),u&&f&&(a=$(r).val(),$(r).css({width:$(r).outerWidth()+"px"}).val("Sending...").attr("disabled",!0),t.hide().text("Please wait.").fadeIn(200),$.ajax({url:l,type:d,data:c,dataType:"json"}).done(function(e){try{!0===e.response?(t.text("You have been added to our list!"),t.delay(1500).fadeOut(200),o.val("")):t.hide().text(e.json.error_message).fadeIn(200)}catch(e){console.log("error in parsing returned ajax data: "+e),t.hide().text("Error occurred. Please see the console for details.").fadeIn(200)}}).fail(function(e,a,i){console.log("Error occured in processing your request:"),console.log(e),console.log("Text status"),console.log(a),console.log("Error thrown"),console.log(i),console.log("Server response"),console.log(e.status),console.log("Response Text may contain error output from PHP"),console.log(e.responseText),t.hide().text("Oh boy an error occurred, please try again."+a+" ("+i+")").fadeIn(200)}).always(function(){$(r).css({width:""}).val(a).attr("disabled",!1)}))})},contactForm:function(){$(".contact-form").submit(function(e){e.preventDefault();var a=$(this),t=a.parent().find(z),i=a.find(S),o=a.find('input[type="email"]'),n=a.find(k),s=a.find(T),r=a.attr("action"),l=a.attr("method"),d=[],c=encodeURIComponent(a.find("textarea[name=message]").val()+"\n"),h=[];a.find("input:not([type=submit]),select,textarea").each(function(e,a){var i,t,o,n=$(a),s=n.attr("name");n.hasClass("form-aux")&&s?(i=n.data("label")||s,t=n.find("option:selected").text(),!(o=n.val())&&n.is("select")?o=i==t?"Not selected":n.find("option:selected").text():"checkbox"!=n.attr("type")||n.prop("checked")||(o="Not checked"),h.push({name:s,label:encodeURIComponent(i),value:encodeURIComponent(o)})):s&&"message"!=s&&d.push(s+"="+encodeURIComponent(n.val()))});for(var u=0;u<h.length;u++){c+=encodeURIComponent("\n")+h[u].label+"%3A%20"+h[u].value}d.push("message="+c),d=d.join("&");var f,p=!1,g=!1,m=!1;if(O=O.split(".").join(""),i.removeClass(O),i.each(function(){($(this).attr("required")||$(this).children().attr("required"))&&($(this).is(":checkbox")?$(this).is(":checkbox:checked")||(p=!0,$(this).addClass(O)):$(this).children().is("select")?$(this).children().val()==$(this).children().find("option:selected").text()&&(p=!0,$(this).addClass(O)):$(this).val()||(p=!0,$(this).addClass(O)),p&&t.hide().text(I).fadeIn(200))}),p||(g=!0),o.val()&&!R.isValidEmail(o.val())?(t.hide().text(M).fadeIn(200),o.addClass(O)):m=!0,""!==n.val())return!1;p&&o.val()&&!R.isValidEmail(o.val())&&t.hide().text(I+" "+M).fadeIn(200),g&&m&&(f=$(s).val(),$(s).css({width:$(s).outerWidth()+"px"}).val("Sending...").attr("disabled",!0),t.hide().text("Please wait.").fadeIn(200),$.ajax({url:r,type:l,data:d,dataType:"json"}).done(function(a){try{var e;!0===a.response?(t.text("Thank you, your email has been received!"),t.delay(1500).fadeOut(200),i.val("")):(e=void 0===a.json.error_message?"There is a possibility that your message was not sent. Please check up the server or script configuration.":a.json.error_message,t.hide().text(A+" "+e).fadeIn(200))}catch(e){console.log("error in parsing returned ajax data: "+e),console.log(a),t.hide().text("Error occurred. Please see the console for details.").fadeIn(200)}}).fail(function(e,a,i){console.log("Error occured in processing your request:"),console.log(e),console.log("Text status"),console.log(a),console.log("Error thrown"),console.log(i),console.log("Server response"),console.log(e.status),console.log("Response Text may contain error output from PHP"),console.log(qXHR.responseText),t.hide().text(A+" (Please see the console for error details.)").fadeIn(200)}).always(function(){$(s).css({width:""}).val(f).attr("disabled",!1)}))})},isValidEmail:function(e){return new RegExp(/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i).test(e)},enablePlaceHolder:function(){$("input, textarea").placeholder()},googleMap:function(){$(".map-container").each(function(){var e=$(this).children().attr("id");L=$(this).data("icon")?JSON.parse("["+$(this).data("icon")+"]"):L,F=$(this).data("coordinates")?$(this).data("coordinates"):F,E=$(this).data("info")?JSON.parse("["+$(this).data("info")+"]"):E,j=$(this).data("zoom-level")?parseFloat($(this).data("zoom-level")):j;var a,i,t=!(!$(this).data("style")||"greyscale"!==$(this).data("style"))?-100:0,o={draggable:!$("body").hasClass("mobile"),zoom:j,center:new google.maps.LatLng(F[0][0],F[0][1]),mapTypeControl:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_RIGHT},panControl:!1,panControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_TOP},scrollwheel:!1,scaleControl:!0,streetViewControl:!1,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},styles:[{stylers:[{saturation:t}]}]},n=new google.maps.Map(document.getElementById(e),o);$(this).children().data("mapref",n);for(var s=0,r=0;r<F.length;r++)a=new google.maps.Marker({position:new google.maps.LatLng(F[r][0],F[r][1]),map:n,icon:new google.maps.MarkerImage(L[s],null,null,null,new google.maps.Size(45,53))}),i=new google.maps.InfoWindow({content:E[r]}),google.maps.event.addListener(a,"click",function(e,a){return function(){i.setContent(E[a]),i.open(n,e)}}(a,r)),s++;google.maps.event.addDomListener(window,"resize",function(){var e=n.getCenter();google.maps.event.trigger(n,"resize"),n.setCenter(e)})}),$(".map-pan-link").each(function(){$(this).data("marker",!1),$(this).on("click",function(e){e.preventDefault();var a,i,t,o=$("#"+$(this).data("target-map")).data("mapref"),n=$(this).data("coordinates"),s=new google.maps.LatLng(n[0][0],n[0][1]),r=$(this).data("icon")?JSON.parse("["+$(this).data("icon")+"]"):null,l=$(this).data("icon")?JSON.parse("["+$(this).data("info")+"]"):null;o.panTo(s),$(this).data("marker")||($(this).data("icon")&&(a=new google.maps.Marker({position:new google.maps.LatLng(n[0][0],n[0][1]),map:o,icon:new google.maps.MarkerImage(r[0],null,null,null,new google.maps.Size(45,53))})),$(this).data("info")&&(i=new google.maps.InfoWindow({content:l[0]}),google.maps.event.addListener(a,"click",(t=a,function(){i.setContent(l[0]),i.open(o,t)}))),$(this).data("marker",!0)),$(this).closest(f).hasClass(f.split(".").join(""))&&($(this).closest(f).find(".active").removeClass("active"),$(this).addClass("active"))})})},fixedFooter:function(){if($("body").hasClass("mobile"))return!1;var e=$(q).outerHeight(),a=q.split(".").join(""),i=$(W).offset().top;function t(){$(D).hasClass(a)&&960<$(window).width()&&$(W).css({marginBottom:e+"px"}),$(D).is("[data-animate-reveal]")&&($(W).outerHeight()+i-$(window).scrollTop()<=$(window).height()&&960<$(window).width()?$(W).addClass("animate-content"):$(W).removeClass("animate-content"))}$(D).hasClass(a)&&$(W).addClass("reveal-footer"),$(window).on("scroll",function(){t()}),$(window).on("resize",function(){e=$(q).outerHeight(),t()}),t()},pageFade:function(){$(".fade-location, .logo a, .footer-logo a, .navigation a, .side-navigation a, .overlay-navigation a, .grid .overlay-link, .post-media .overlay-link, .post-title a, .post-read-more a, .pagination-previous, .pagination-next, .breadcrumb a, a.read-more").each(function(){"_blank"===$(this).attr("target")&&$(this).addClass("no-page-fade"),$(this).not(".no-page-fade, .no-page-fade a, .mail-link, .lightbox-link, .contains-sub-menu, .blog .pagination-previous, .blog .pagination-next, .disabled, .scroll-link, .navigation-show a, a.navigation-show").on("click",function(e){e.preventDefault();var a=this.href;$("body").hasClass("transition-support")?$("body").addClass("page-fade-out").on(V,function(e){return e.stopPropagation(),e.target===$(this)[0]&&void R.goToNewPage(a)}):R.goToNewPage(a)})})},goToNewPage:function(e){window.location=e},preloadPage:function(e){$("body").preloadPage({onComplete:function(){R.horizon(".horizon",".parallax .horizon","easeInOutQuint",!1,1)}})}};!function(){for(var n=0,e=["ms","moz","webkit","o"],a=0;a<e.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[e[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[a]+"CancelAnimationFrame"]||window[e[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,a){var i=(new Date).getTime(),t=Math.max(0,16-(i-n)),o=window.setTimeout(function(){e(i+t)},t);return n=i+t,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),R.init()});